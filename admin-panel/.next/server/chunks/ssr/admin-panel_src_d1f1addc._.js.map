{"version":3,"sources":["../../../../../admin-panel/src/components/Modal.tsx","../../../../../admin-panel/src/app/categories/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { ReactNode } from 'react';\r\nimport { HiOutlineX } from 'react-icons/hi';\r\n\r\ninterface ModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    title: string;\r\n    children: ReactNode;\r\n    footer?: ReactNode;\r\n}\r\n\r\nexport default function Modal({ isOpen, onClose, title, children, footer }: ModalProps) {\r\n    if (!isOpen) return null;\r\n\r\n    return (\r\n        <div className=\"modal-overlay\" onClick={onClose}>\r\n            <div className=\"modal\" onClick={(e) => e.stopPropagation()}>\r\n                <div className=\"modal-header\">\r\n                    <h3 className=\"modal-title\">{title}</h3>\r\n                    <button className=\"btn btn-icon btn-ghost\" onClick={onClose}>\r\n                        <HiOutlineX size={20} />\r\n                    </button>\r\n                </div>\r\n                <div className=\"modal-body\">\r\n                    {children}\r\n                </div>\r\n                {footer && (\r\n                    <div className=\"modal-footer\">\r\n                        {footer}\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { getCategories, createCategory, updateCategory, deleteCategory } from '@/lib/db';\r\nimport Modal from '@/components/Modal';\r\nimport { HiOutlinePlus, HiOutlinePencil, HiOutlineTrash } from 'react-icons/hi';\r\nimport type { Category } from '@/lib/seed-data';\r\n\r\nexport default function AdminCategories() {\r\n    const [refresh, setRefresh] = useState(0);\r\n    const [categories, setCategories] = useState<Category[]>([]);\r\n    const [modalOpen, setModalOpen] = useState(false);\r\n    const [editing, setEditing] = useState<Category | null>(null);\r\n    const [form, setForm] = useState({ name: '', icon: 'ðŸ“', image: '', order: 1 });\r\n\r\n    useEffect(() => {\r\n        getCategories().then(setCategories);\r\n    }, [refresh]);\r\n\r\n    const openCreate = () => {\r\n        setEditing(null);\r\n        setForm({ name: '', icon: 'ðŸ“', image: '', order: categories.length + 1 });\r\n        setModalOpen(true);\r\n    };\r\n\r\n    const openEdit = (cat: Category) => {\r\n        setEditing(cat);\r\n        setForm({ name: cat.name, icon: cat.icon, image: cat.image, order: cat.order });\r\n        setModalOpen(true);\r\n    };\r\n\r\n    const handleSave = async () => {\r\n        if (!form.name) return;\r\n        if (editing) {\r\n            await updateCategory(editing.id, form);\r\n        } else {\r\n            await createCategory(form);\r\n        }\r\n        setModalOpen(false);\r\n        setRefresh(r => r + 1);\r\n    };\r\n\r\n    const handleDelete = async (id: string) => {\r\n        if (confirm('Delete this category? Businesses in it will lose their category.')) {\r\n            await deleteCategory(id);\r\n            setRefresh(r => r + 1);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"section-header\">\r\n                <div>\r\n                    <h1 className=\"section-title\">Categories</h1>\r\n                    <p className=\"section-subtitle\">Organize businesses into categories</p>\r\n                </div>\r\n                <button className=\"btn btn-primary\" onClick={openCreate}>\r\n                    <HiOutlinePlus /> Add Category\r\n                </button>\r\n            </div>\r\n\r\n            <div className=\"table-container\">\r\n                <table className=\"table\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th>Order</th>\r\n                            <th>Icon</th>\r\n                            <th>Name</th>\r\n                            <th>Actions</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {categories.map((cat) => (\r\n                            <tr key={cat.id}>\r\n                                <td>{cat.order}</td>\r\n                                <td style={{ fontSize: '24px' }}>{cat.icon}</td>\r\n                                <td className=\"font-medium\">{cat.name}</td>\r\n                                <td>\r\n                                    <div className=\"flex gap-xs\">\r\n                                        <button className=\"btn btn-ghost btn-sm\" onClick={() => openEdit(cat)}>\r\n                                            <HiOutlinePencil />\r\n                                        </button>\r\n                                        <button className=\"btn btn-danger btn-sm\" onClick={() => handleDelete(cat.id)}>\r\n                                            <HiOutlineTrash />\r\n                                        </button>\r\n                                    </div>\r\n                                </td>\r\n                            </tr>\r\n                        ))}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n\r\n            <Modal\r\n                isOpen={modalOpen}\r\n                onClose={() => setModalOpen(false)}\r\n                title={editing ? 'Edit Category' : 'Create Category'}\r\n                footer={\r\n                    <>\r\n                        <button className=\"btn btn-secondary\" onClick={() => setModalOpen(false)}>Cancel</button>\r\n                        <button className=\"btn btn-primary\" onClick={handleSave}>Save</button>\r\n                    </>\r\n                }\r\n            >\r\n                <div className=\"form-group\">\r\n                    <label className=\"form-label\">Icon (emoji)</label>\r\n                    <input className=\"input\" value={form.icon} onChange={(e) => setForm({ ...form, icon: e.target.value })} />\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <label className=\"form-label\">Name</label>\r\n                    <input className=\"input\" value={form.name} onChange={(e) => setForm({ ...form, name: e.target.value })} placeholder=\"e.g. Digital Businesses\" />\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <label className=\"form-label\">Cover Image URL</label>\r\n                    <input className=\"input\" value={form.image} onChange={(e) => setForm({ ...form, image: e.target.value })} placeholder=\"https://images.unsplash.com/...\" />\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <label className=\"form-label\">Order</label>\r\n                    <input className=\"input\" type=\"number\" value={form.order} onChange={(e) => setForm({ ...form, order: parseInt(e.target.value) || 1 })} />\r\n                </div>\r\n            </Modal>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}
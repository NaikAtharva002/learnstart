module.exports=[50421,a=>{"use strict";var b=a.i(87924),c=a.i(74362);function d({isOpen:a,onClose:d,title:e,children:f,footer:g}){return a?(0,b.jsx)("div",{className:"modal-overlay",onClick:d,children:(0,b.jsxs)("div",{className:"modal",onClick:a=>a.stopPropagation(),children:[(0,b.jsxs)("div",{className:"modal-header",children:[(0,b.jsx)("h3",{className:"modal-title",children:e}),(0,b.jsx)("button",{className:"btn btn-icon btn-ghost",onClick:d,children:(0,b.jsx)(c.HiOutlineX,{size:20})})]}),(0,b.jsx)("div",{className:"modal-body",children:f}),g&&(0,b.jsx)("div",{className:"modal-footer",children:g})]})}):null}a.s(["default",()=>d])},31917,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(81713);function e(a){if(!a)return null;if(/^[a-zA-Z0-9_-]{11}$/.test(a.trim()))return a.trim();try{let b=new URL(a);if(b.hostname.includes("youtube.com")&&b.searchParams.has("v"))return b.searchParams.get("v");if("youtu.be"===b.hostname)return b.pathname.slice(1).split("/")[0]||null;let c=b.pathname.match(/^\/(shorts|embed)\/([a-zA-Z0-9_-]+)/);if(c)return c[2]}catch{let b=a.match(/(?:v=|\/)([\w-]{11})(?:\?|&|$)/);if(b)return b[1]}return null}var f=a.i(50421),g=a.i(74362);function h(){let[a,h]=(0,c.useState)(0),[i,j]=(0,c.useState)([]),[k,l]=(0,c.useState)(""),[m,n]=(0,c.useState)([]),[o,p]=(0,c.useState)(""),[q,r]=(0,c.useState)([]);(0,c.useEffect)(()=>{(0,d.getBusinesses)().then(a=>{j(a),a.length>0&&!k&&l(a[0].id)})},[a,k]),(0,c.useEffect)(()=>{k?(0,d.getPhasesByBusiness)(k).then(a=>{n(a),a.length>0&&!a.find(a=>a.id===o)?p(a[0].id):0===a.length&&p("")}):(n([]),p(""))},[k,a,o]),(0,c.useEffect)(()=>{o?(0,d.getVideosByPhase)(o).then(r):r([])},[o,a]);let[s,t]=(0,c.useState)(!1),[u,v]=(0,c.useState)(null),[w,x]=(0,c.useState)({title:"",youtubeUrl:"",youtubeId:"",description:"",duration:"",order:1,difficulty:"beginner",phaseId:""}),y=w.youtubeId||e(w.youtubeUrl)||"",z=()=>{v(null),x({title:"",youtubeUrl:"",youtubeId:"",description:"",duration:"",order:q.length+1,difficulty:"beginner",phaseId:o}),t(!0)},A=async()=>{if(!w.title||!w.youtubeUrl)return;let a=e(w.youtubeUrl)||"",b={...w,youtubeId:a};u?await (0,d.updateVideo)(u.id,b):await (0,d.createVideo)(b),t(!1),h(a=>a+1)},B=async a=>{confirm("Delete this video?")&&(await (0,d.deleteVideo)(a),h(a=>a+1))},C=async(a,b)=>{let c="up"===b?a.order-1:a.order+1,e=q.find(a=>a.order===c);e&&(await (0,d.updateVideo)(e.id,{order:a.order}),await (0,d.updateVideo)(a.id,{order:c}),h(a=>a+1))};return(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"section-header",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"section-title",children:"Videos"}),(0,b.jsx)("p",{className:"section-subtitle",children:"Manage YouTube videos for each phase"})]}),(0,b.jsxs)("button",{className:"btn btn-primary",onClick:z,disabled:!o,children:[(0,b.jsx)(g.HiOutlinePlus,{})," Add Video"]})]}),(0,b.jsxs)("div",{className:"flex gap-md mb-lg",style:{flexWrap:"wrap"},children:[(0,b.jsxs)("select",{className:"input select",value:k,onChange:a=>l(a.target.value),style:{width:"auto",minWidth:"180px"},children:[(0,b.jsx)("option",{value:"",children:"Select Business..."}),i.map(a=>(0,b.jsxs)("option",{value:a.id,children:[a.icon," ",a.name]},a.id))]}),(0,b.jsxs)("select",{className:"input select",value:o,onChange:a=>p(a.target.value),style:{width:"auto",minWidth:"180px"},children:[(0,b.jsx)("option",{value:"",children:"Select Phase..."}),m.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))]})]}),(0,b.jsx)("div",{className:"table-container",children:(0,b.jsxs)("table",{className:"table",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{children:"#"}),(0,b.jsx)("th",{children:"Preview"}),(0,b.jsx)("th",{children:"Title"}),(0,b.jsx)("th",{children:"Duration"}),(0,b.jsx)("th",{children:"Difficulty"}),(0,b.jsx)("th",{children:"Actions"})]})}),(0,b.jsx)("tbody",{children:q.map(a=>(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:a.order}),(0,b.jsx)("td",{children:(0,b.jsx)("img",{src:function(a,b="hq"){return`https://img.youtube.com/vi/${a}/${({default:"default",hq:"hqdefault",mq:"mqdefault",sd:"sddefault",maxres:"maxresdefault"})[b]}.jpg`}(a.youtubeId,"default"),alt:"",style:{width:"80px",height:"45px",objectFit:"cover",borderRadius:"var(--radius-sm)"}})}),(0,b.jsx)("td",{className:"font-medium",children:a.title}),(0,b.jsx)("td",{className:"text-sm text-muted",children:a.duration}),(0,b.jsx)("td",{children:(0,b.jsx)("span",{className:"badge badge-accent",children:a.difficulty})}),(0,b.jsx)("td",{children:(0,b.jsxs)("div",{className:"flex gap-xs",children:[(0,b.jsx)("button",{className:"btn btn-ghost btn-sm",onClick:()=>C(a,"up"),disabled:1===a.order,children:(0,b.jsx)(g.HiOutlineArrowUp,{})}),(0,b.jsx)("button",{className:"btn btn-ghost btn-sm",onClick:()=>C(a,"down"),disabled:a.order===q.length,children:(0,b.jsx)(g.HiOutlineArrowDown,{})}),(0,b.jsx)("button",{className:"btn btn-ghost btn-sm",onClick:()=>{v(a),x({title:a.title,youtubeUrl:a.youtubeUrl,youtubeId:a.youtubeId,description:a.description,duration:a.duration,order:a.order,difficulty:a.difficulty,phaseId:a.phaseId}),t(!0)},children:(0,b.jsx)(g.HiOutlinePencil,{})}),(0,b.jsx)("button",{className:"btn btn-danger btn-sm",onClick:()=>B(a.id),children:(0,b.jsx)(g.HiOutlineTrash,{})})]})})]},a.id))})]})}),0===q.length&&(0,b.jsxs)("div",{className:"empty-state",children:[(0,b.jsx)("div",{className:"empty-state-icon",children:"ðŸŽ¬"}),(0,b.jsx)("p",{className:"empty-state-title",children:"No videos in this phase"}),o&&(0,b.jsx)("button",{className:"btn btn-primary mt-md",onClick:z,children:"Add first video"})]}),(0,b.jsxs)(f.default,{isOpen:s,onClose:()=>t(!1),title:u?"Edit Video":"Add Video",footer:(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{className:"btn btn-secondary",onClick:()=>t(!1),children:"Cancel"}),(0,b.jsx)("button",{className:"btn btn-primary",onClick:A,children:"Save"})]}),children:[(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{className:"form-label",children:"YouTube URL"}),(0,b.jsx)("input",{className:"input",value:w.youtubeUrl,onChange:a=>{var b;let c;return c=e(b=a.target.value)||"",void x(a=>({...a,youtubeUrl:b,youtubeId:c}))},placeholder:"Paste any YouTube link â€” URL auto-parsed"}),y&&(0,b.jsxs)("p",{className:"text-xs text-muted",style:{marginTop:"4px"},children:["âœ… Video ID: ",(0,b.jsx)("code",{style:{color:"var(--accent-primary)"},children:y})]}),w.youtubeUrl&&!y&&(0,b.jsx)("p",{className:"text-xs",style:{marginTop:"4px",color:"var(--accent-danger)"},children:"âš ï¸ Could not extract video ID from this URL"})]}),y&&(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{className:"form-label",children:"Preview"}),(0,b.jsx)("div",{style:{position:"relative",paddingBottom:"56.25%",borderRadius:"var(--radius-md)",overflow:"hidden",background:"var(--bg-secondary)"},children:(0,b.jsx)("iframe",{src:`https://www.youtube.com/embed/${y}?rel=0&modestbranding=1`,title:"Preview",allow:"encrypted-media",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",border:"none"}})})]}),(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{className:"form-label",children:"Title"}),(0,b.jsx)("input",{className:"input",value:w.title,onChange:a=>x({...w,title:a.target.value}),placeholder:"Video title"})]}),(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{className:"form-label",children:"Description"}),(0,b.jsx)("textarea",{className:"input textarea",value:w.description,onChange:a=>x({...w,description:a.target.value})})]}),(0,b.jsxs)("div",{className:"flex gap-md",children:[(0,b.jsxs)("div",{className:"form-group",style:{flex:1},children:[(0,b.jsx)("label",{className:"form-label",children:"Duration"}),(0,b.jsx)("input",{className:"input",value:w.duration,onChange:a=>x({...w,duration:a.target.value}),placeholder:"12:30"})]}),(0,b.jsxs)("div",{className:"form-group",style:{flex:1},children:[(0,b.jsx)("label",{className:"form-label",children:"Difficulty"}),(0,b.jsxs)("select",{className:"input select",value:w.difficulty,onChange:a=>x({...w,difficulty:a.target.value}),children:[(0,b.jsx)("option",{value:"beginner",children:"Beginner"}),(0,b.jsx)("option",{value:"intermediate",children:"Intermediate"}),(0,b.jsx)("option",{value:"advanced",children:"Advanced"})]})]})]}),(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{className:"form-label",children:"Order"}),(0,b.jsx)("input",{className:"input",type:"number",value:w.order,onChange:a=>x({...w,order:parseInt(a.target.value)||1})})]})]})]})}a.s(["default",()=>h],31917)}];

//# sourceMappingURL=admin-panel_src_23035356._.js.map
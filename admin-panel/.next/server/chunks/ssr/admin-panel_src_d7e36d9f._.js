module.exports=[50421,a=>{"use strict";var b=a.i(87924),c=a.i(74362);function d({isOpen:a,onClose:d,title:e,children:f,footer:g}){return a?(0,b.jsx)("div",{className:"modal-overlay",onClick:d,children:(0,b.jsxs)("div",{className:"modal",onClick:a=>a.stopPropagation(),children:[(0,b.jsxs)("div",{className:"modal-header",children:[(0,b.jsx)("h3",{className:"modal-title",children:e}),(0,b.jsx)("button",{className:"btn btn-icon btn-ghost",onClick:d,children:(0,b.jsx)(c.HiOutlineX,{size:20})})]}),(0,b.jsx)("div",{className:"modal-body",children:f}),g&&(0,b.jsx)("div",{className:"modal-footer",children:g})]})}):null}a.s(["default",()=>d])},94404,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(81713),e=a.i(50421),f=a.i(74362);function g(){let[a,g]=(0,c.useState)(0),[h,i]=(0,c.useState)([]),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)([]),[n,o]=(0,c.useState)(""),[p,q]=(0,c.useState)([]);(0,c.useEffect)(()=>{(0,d.getBusinesses)().then(a=>{i(a),a.length>0&&!j&&k(a[0].id)})},[a,j]),(0,c.useEffect)(()=>{j?(0,d.getPhasesByBusiness)(j).then(a=>{m(a),a.length>0&&!a.find(a=>a.id===n)?o(a[0].id):0===a.length&&o("")}):(m([]),o(""))},[j,a,n]),(0,c.useEffect)(()=>{n?(0,d.getTasksByPhase)(n).then(q):q([])},[n,a]);let[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)(null),[v,w]=(0,c.useState)({title:"",description:"",order:1,phaseId:""}),x=()=>{u(null),w({title:"",description:"",order:p.length+1,phaseId:n}),s(!0)},y=async()=>{v.title&&(t?await (0,d.updateTask)(t.id,v):await (0,d.createTask)(v),s(!1),g(a=>a+1))},z=async a=>{confirm("Delete this task?")&&(await (0,d.deleteTask)(a),g(a=>a+1))};return(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"section-header",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"section-title",children:"Tasks"}),(0,b.jsx)("p",{className:"section-subtitle",children:"Manage action tasks for each phase"})]}),(0,b.jsxs)("button",{className:"btn btn-primary",onClick:x,disabled:!n,children:[(0,b.jsx)(f.HiOutlinePlus,{})," Add Task"]})]}),(0,b.jsxs)("div",{className:"flex gap-md mb-lg",style:{flexWrap:"wrap"},children:[(0,b.jsxs)("select",{className:"input select",value:j,onChange:a=>k(a.target.value),style:{width:"auto",minWidth:"180px"},children:[(0,b.jsx)("option",{value:"",children:"Select Business..."}),h.map(a=>(0,b.jsxs)("option",{value:a.id,children:[a.icon," ",a.name]},a.id))]}),(0,b.jsxs)("select",{className:"input select",value:n,onChange:a=>o(a.target.value),style:{width:"auto",minWidth:"180px"},children:[(0,b.jsx)("option",{value:"",children:"Select Phase..."}),l.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))]})]}),(0,b.jsx)("div",{className:"table-container",children:(0,b.jsxs)("table",{className:"table",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{children:"#"}),(0,b.jsx)("th",{children:"Title"}),(0,b.jsx)("th",{children:"Description"}),(0,b.jsx)("th",{children:"Actions"})]})}),(0,b.jsx)("tbody",{children:p.map(a=>(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:a.order}),(0,b.jsx)("td",{className:"font-medium",children:a.title}),(0,b.jsx)("td",{className:"text-sm text-muted truncate",style:{maxWidth:"300px"},children:a.description||"—"}),(0,b.jsx)("td",{children:(0,b.jsxs)("div",{className:"flex gap-xs",children:[(0,b.jsx)("button",{className:"btn btn-ghost btn-sm",onClick:()=>{u(a),w({title:a.title,description:a.description,order:a.order,phaseId:a.phaseId}),s(!0)},children:(0,b.jsx)(f.HiOutlinePencil,{})}),(0,b.jsx)("button",{className:"btn btn-danger btn-sm",onClick:()=>z(a.id),children:(0,b.jsx)(f.HiOutlineTrash,{})})]})})]},a.id))})]})}),0===p.length&&(0,b.jsxs)("div",{className:"empty-state",children:[(0,b.jsx)("div",{className:"empty-state-icon",children:"✅"}),(0,b.jsx)("p",{className:"empty-state-title",children:"No tasks in this phase"}),n&&(0,b.jsx)("button",{className:"btn btn-primary mt-md",onClick:x,children:"Add first task"})]}),(0,b.jsxs)(e.default,{isOpen:r,onClose:()=>s(!1),title:t?"Edit Task":"Create Task",footer:(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{className:"btn btn-secondary",onClick:()=>s(!1),children:"Cancel"}),(0,b.jsx)("button",{className:"btn btn-primary",onClick:y,children:"Save"})]}),children:[(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{className:"form-label",children:"Title"}),(0,b.jsx)("input",{className:"input",value:v.title,onChange:a=>w({...v,title:a.target.value}),placeholder:"e.g. Create your first proposal"})]}),(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{className:"form-label",children:"Description (optional)"}),(0,b.jsx)("textarea",{className:"input textarea",value:v.description,onChange:a=>w({...v,description:a.target.value})})]}),(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{className:"form-label",children:"Order"}),(0,b.jsx)("input",{className:"input",type:"number",value:v.order,onChange:a=>w({...v,order:parseInt(a.target.value)||1})})]})]})]})}a.s(["default",()=>g])}];

//# sourceMappingURL=admin-panel_src_d7e36d9f._.js.map
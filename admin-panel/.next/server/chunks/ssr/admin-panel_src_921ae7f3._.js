module.exports=[50421,a=>{"use strict";var b=a.i(87924),c=a.i(74362);function d({isOpen:a,onClose:d,title:e,children:f,footer:g}){return a?(0,b.jsx)("div",{className:"modal-overlay",onClick:d,children:(0,b.jsxs)("div",{className:"modal",onClick:a=>a.stopPropagation(),children:[(0,b.jsxs)("div",{className:"modal-header",children:[(0,b.jsx)("h3",{className:"modal-title",children:e}),(0,b.jsx)("button",{className:"btn btn-icon btn-ghost",onClick:d,children:(0,b.jsx)(c.HiOutlineX,{size:20})})]}),(0,b.jsx)("div",{className:"modal-body",children:f}),g&&(0,b.jsx)("div",{className:"modal-footer",children:g})]})}):null}a.s(["default",()=>d])},82315,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(81713),e=a.i(50421),f=a.i(74362);function g(){let[a,g]=(0,c.useState)(0),[h,i]=(0,c.useState)([]),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)([]);(0,c.useEffect)(()=>{(0,d.getBusinesses)().then(a=>{i(a),a.length>0&&!j&&k(a[0].id)})},[a,j]),(0,c.useEffect)(()=>{j?(0,d.getPhasesByBusiness)(j).then(m):m([])},[j,a]);let[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(null),[r,s]=(0,c.useState)({name:"",description:"",order:1,businessId:""}),t=()=>{q(null),s({name:"",description:"",order:l.length+1,businessId:j}),o(!0)},u=async()=>{r.name&&r.businessId&&(p?await (0,d.updatePhase)(p.id,r):await (0,d.createPhase)(r),o(!1),g(a=>a+1))},v=async a=>{confirm("Delete this phase?")&&(await (0,d.deletePhase)(a),g(a=>a+1))},w=async(a,b)=>{let c="up"===b?a.order-1:a.order+1,e=l.find(a=>a.order===c);e&&(await (0,d.updatePhase)(e.id,{order:a.order}),await (0,d.updatePhase)(a.id,{order:c}),g(a=>a+1))};return(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"section-header",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"section-title",children:"Phases"}),(0,b.jsx)("p",{className:"section-subtitle",children:"Manage roadmap phases for each business"})]}),(0,b.jsxs)("button",{className:"btn btn-primary",onClick:t,children:[(0,b.jsx)(f.HiOutlinePlus,{})," Add Phase"]})]}),(0,b.jsx)("div",{className:"mb-lg",children:(0,b.jsx)("select",{className:"input select",value:j,onChange:a=>k(a.target.value),style:{width:"auto",minWidth:"200px"},children:h.map(a=>(0,b.jsxs)("option",{value:a.id,children:[a.icon," ",a.name]},a.id))})}),(0,b.jsx)("div",{className:"table-container",children:(0,b.jsxs)("table",{className:"table",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{children:"Order"}),(0,b.jsx)("th",{children:"Name"}),(0,b.jsx)("th",{children:"Description"}),(0,b.jsx)("th",{children:"Actions"})]})}),(0,b.jsx)("tbody",{children:l.map(a=>(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:a.order}),(0,b.jsx)("td",{className:"font-medium",children:a.name}),(0,b.jsx)("td",{className:"text-sm text-muted truncate",style:{maxWidth:"300px"},children:a.description}),(0,b.jsx)("td",{children:(0,b.jsxs)("div",{className:"flex gap-xs",children:[(0,b.jsx)("button",{className:"btn btn-ghost btn-sm",onClick:()=>w(a,"up"),disabled:1===a.order,children:(0,b.jsx)(f.HiOutlineArrowUp,{})}),(0,b.jsx)("button",{className:"btn btn-ghost btn-sm",onClick:()=>w(a,"down"),disabled:a.order===l.length,children:(0,b.jsx)(f.HiOutlineArrowDown,{})}),(0,b.jsx)("button",{className:"btn btn-ghost btn-sm",onClick:()=>{q(a),s({name:a.name,description:a.description,order:a.order,businessId:a.businessId}),o(!0)},children:(0,b.jsx)(f.HiOutlinePencil,{})}),(0,b.jsx)("button",{className:"btn btn-danger btn-sm",onClick:()=>v(a.id),children:(0,b.jsx)(f.HiOutlineTrash,{})})]})})]},a.id))})]})}),0===l.length&&(0,b.jsxs)("div",{className:"empty-state",children:[(0,b.jsx)("div",{className:"empty-state-icon",children:"ðŸš©"}),(0,b.jsx)("p",{className:"empty-state-title",children:"No phases found"}),j&&(0,b.jsx)("button",{className:"btn btn-primary mt-md",onClick:t,children:"Create the first phase"})]}),(0,b.jsxs)(e.default,{isOpen:n,onClose:()=>o(!1),title:p?"Edit Phase":"Create Phase",footer:(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{className:"btn btn-secondary",onClick:()=>o(!1),children:"Cancel"}),(0,b.jsx)("button",{className:"btn btn-primary",onClick:u,children:"Save"})]}),children:[(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{className:"form-label",children:"Business"}),(0,b.jsx)("select",{className:"input select",value:r.businessId,onChange:a=>s({...r,businessId:a.target.value}),children:h.map(a=>(0,b.jsxs)("option",{value:a.id,children:[a.icon," ",a.name]},a.id))})]}),(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{className:"form-label",children:"Name"}),(0,b.jsx)("input",{className:"input",value:r.name,onChange:a=>s({...r,name:a.target.value}),placeholder:"e.g. Foundation"})]}),(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{className:"form-label",children:"Description"}),(0,b.jsx)("textarea",{className:"input textarea",value:r.description,onChange:a=>s({...r,description:a.target.value})})]}),(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{className:"form-label",children:"Order"}),(0,b.jsx)("input",{className:"input",type:"number",value:r.order,onChange:a=>s({...r,order:parseInt(a.target.value)||1})})]})]})]})}a.s(["default",()=>g])}];

//# sourceMappingURL=admin-panel_src_921ae7f3._.js.map